<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=1.0, user-scalable=0" />
    <title>Pro Tracker: Elite Partner v6.6</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap');

        :root {
            --phi: 1.618;
            --u: 8px;
            --radius-lg: 32px;
            --shadow-md: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }

        /* --- THEMES --- */
        html[data-theme="light"], html:not([data-theme]) {
            --bg-app: #f4f7fa; --bg-card: #ffffff; --bg-soft: #fcfdfe; --border: #e8ecef;
            --text: #1a202c; --muted: #718096; --accent: #2563eb; --accent-2: #10b981;
            --glass-bg: rgba(255, 255, 255, 0.8);
        }
        html[data-theme="dark"] {
            --bg-app: #0a0c10; --bg-card: #161b22; --bg-soft: #21262d; --border: #30363d;
            --text: #f0f6fc; --muted: #8b949e; --accent: #3b82f6; --accent-2: #10b981;
            --glass-bg: rgba(13, 17, 23, 0.8);
        }
        html[data-theme="cyber"] {
            --bg-app: #000; --bg-card: #080808; --bg-soft: #0c0c0c; --border: #00ff4144;
            --text: #00ff41; --muted: #008f11; --accent: #00ff41; --accent-2: #00ff41;
            --glass-bg: rgba(0, 0, 0, 0.9);
        }

        body { margin: 0; font-family: 'Inter', sans-serif; background: var(--bg-app); color: var(--text); -webkit-tap-highlight-color: transparent; line-height: 1.5; overflow-x: hidden; }
        .app-shell { max-width: 420px; margin: 0 auto; padding: 24px 16px 200px 16px; }
        
        .card { border: 1px solid var(--border); border-radius: var(--radius-lg); background: var(--bg-card); box-shadow: var(--shadow-md); padding: 20px; position: relative; transition: transform 0.2s ease; }
        .exercise-title { font-size: 15px; font-weight: 900; text-transform: uppercase; letter-spacing: 0.02em; line-height: 1.2; text-align: center; }
        .icon-tile { width: 44px; height: 44px; border-radius: 14px; background: var(--bg-soft); display: flex; align-items: center; justify-content: center; font-size: 20px; flex-shrink: 0; border: 1px solid var(--border); }
        .chip { border: 1px solid var(--border); background: var(--bg-soft); border-radius: 999px; padding: 6px 14px; font-size: 10px; font-weight: 900; letter-spacing: .08em; text-transform: uppercase; color: var(--muted); cursor: pointer; }
        .set-dot { width: 50px; height: 50px; border-radius: 14px; border: 2px solid var(--border); display: flex; align-items: center; justify-content: center; font-weight: 900; font-size: 16px; transition: all 0.15s ease; background: var(--bg-soft); color: var(--muted); cursor: pointer; }
        .set-dot.checked { background: var(--accent-2); color: white; border-color: transparent; transform: scale(1.05); }
        
        .collapsible-content { max-height: 1200px; overflow: hidden; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
        .is-collapsed .collapsible-content { max-height: 0; opacity: 0; pointer-events: none; margin-top: 0; }
        .is-collapsed { padding-bottom: 20px !important; }

        .nav-btn { flex: 1; padding: 12px 0; font-size: 10px; font-weight: 900; border-radius: 20px; transition: all 0.3s ease; color: var(--muted); opacity: 0.5; text-transform: uppercase; cursor: pointer; }
        .nav-btn.active { color: white; opacity: 1; background: var(--accent); }
        
        .footer { position: fixed; bottom: 0; left: 0; right: 0; padding: 20px; background: var(--glass-bg); border-top: 1px solid var(--border); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); z-index: 400; }
        #footer-progress-bg { position: absolute; left: 0; top: 0; bottom: 0; background: var(--accent-2); opacity: 0.15; z-index: -1; transition: width 0.4s ease; }
        
        .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.6); backdrop-filter: blur(15px); z-index: 1000; display: none; align-items: center; justify-content: center; padding: 20px; }
        .modal-card { background: var(--bg-card); border-radius: 32px; padding: 32px; width: 100%; max-width: 480px; border: 1px solid var(--border); max-height: 90vh; overflow-y: auto; box-shadow: 0 40px 80px rgba(0,0,0,0.3); }
        
        .tune-btn { width: 52px; height: 52px; border-radius: 16px; background: var(--bg-soft); border: 1px solid var(--border); font-weight: 900; font-size: 22px; color: var(--text); display: flex; align-items: center; justify-content: center; }
        .load-strip { border-radius: 20px; border: 1px solid var(--border); background: var(--bg-soft); padding: 12px; width: 100%; display: flex; align-items: center; justify-content: center; cursor: pointer; }
        
        #focus-overlay { position: fixed; inset: 0; background: var(--bg-app); z-index: 500; display: none; flex-direction: column; padding-bottom: 140px; overflow-y: auto; }
        .micro { font-size: 9px; font-weight: 900; text-transform: uppercase; letter-spacing: 0.15em; color: var(--muted); }
        .cue-box { border-left: 3px solid var(--accent); padding-left: 12px; margin-bottom: 16px; }
        .avoid-box { border-left: 3px solid var(--error); padding-left: 12px; background: rgba(239, 68, 68, 0.05); padding: 8px 12px; border-radius: 0 8px 8px 0; }
        .focus-weight-display { font-size: 80px; font-weight: 900; letter-spacing: -0.05em; line-height: 1; color: var(--accent); }
        
        #matrix-bg { display: none; position: fixed; inset: 0; z-index: -1; opacity: 0.5; }
        html[data-theme="cyber"] #matrix-bg { display: block; }
    </style>
</head>
<body>
    <canvas id="matrix-bg"></canvas>

    <div id="focus-overlay">
        <div class="flex justify-between items-center p-6 mt-4">
            <button onclick="window.app.closeFocus()" class="w-12 h-12 rounded-2xl bg-card border border-base flex items-center justify-center btn-press shadow-sm text-accent">
                <svg width="24" height="24" fill="currentColor" viewBox="0 0 16 16"><path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z" /></svg>
            </button>
            <p class="micro opacity-40 uppercase tracking-widest font-black">Performance Focus</p>
            <div class="w-12"></div>
        </div>
        <div id="focus-content" class="px-6 flex-1"></div>
    </div>

    <div id="modal-overlay" class="modal-overlay" onclick="window.app.closeModal()">
        <div class="modal-card" onclick="event.stopPropagation()"><div id="modal-content"></div></div>
    </div>

    <div class="app-shell">
        <header class="flex justify-between items-center mb-8">
            <div class="min-w-0">
                <h1 class="text-3xl font-black italic uppercase text-blue-600 tracking-tighter leading-none">Pro Track</h1>
                <p class="micro mt-1 opacity-50 font-black">Elite Hub v6.6</p>
            </div>
            <div class="flex gap-2">
                <button onclick="window.app.showThemeSelector()" class="bg-card border border-base px-3 py-2 rounded-2xl text-[10px] font-black uppercase btn-press">Theme</button>
                <button onclick="window.app.resetFull()" class="bg-card border border-base px-3 py-2 rounded-2xl text-[10px] font-black uppercase text-rose-500 btn-press">Reset</button>
            </div>
        </header>

        <section class="card mb-8">
            <div class="flex justify-between items-end mb-4">
                <div class="text-left">
                    <p class="micro opacity-40 mb-1">Spatial Protocol</p>
                    <h2 id="progress-percent" class="text-4xl font-black tracking-tighter leading-none">0%</h2>
                </div>
                <span class="chip cursor-default font-black"><span id="sets-done">0</span> / <span id="sets-total">0</span> Sets</span>
            </div>
            <div class="h-2 rounded-full overflow-hidden bg-soft border border-base">
                <div id="progress-bar" class="h-full bg-emerald-500 transition-all duration-700" style="width:0%"></div>
            </div>
        </section>

        <!-- Navigation Tabs (A-X-B-Y-C) -->
        <nav class="flex p-1 gap-1 rounded-2xl mb-10 bg-soft border border-base shadow-inner overflow-x-auto no-scrollbar">
            <button onclick="window.app.setTab('A')" id="btn-tab-A" class="nav-btn btn-press">A</button>
            <button onclick="window.app.setTab('X')" id="btn-tab-X" class="nav-btn btn-press">X</button>
            <button onclick="window.app.setTab('B')" id="btn-tab-B" class="nav-btn btn-press">B</button>
            <button onclick="window.app.setTab('Y')" id="btn-tab-Y" class="nav-btn btn-press">Y</button>
            <button onclick="window.app.setTab('C')" id="btn-tab-C" class="nav-btn btn-press">C</button>
        </nav>

        <main id="main-list" class="space-y-6"></main>
    </div>

    <footer class="footer safe-bottom">
        <div id="footer-progress-bg"></div>
        <div class="max-w-md mx-auto flex items-center justify-between gap-6">
            <button onclick="window.app.enterFocus()" class="w-12 h-12 rounded-2xl bg-card border border-base flex items-center justify-center btn-press shrink-0 shadow-sm text-emerald-500">
                <svg width="22" height="22" fill="currentColor" viewBox="0 0 16 16"><path d="M1.5 1a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4A1.5 1.5 0 0 1 1.5 0h4a.5.5 0 0 1 0 1zM10 .5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 16 1.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5M.5 10a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 10 14.5v-4a.5.5 0 0 1 .5-.5m15 0.5a.5.5 0 0 1 .5-.5v4a1.5 1.5 0 0 1-1.5 1.5h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5z" /></svg>
            </button>
            <div class="flex-1 min-w-0">
                <p id="coach-name" class="text-xs font-black uppercase truncate text-main">Syncing...</p>
                <div class="flex items-center gap-3 mt-1">
                    <span id="coach-load" class="text-[10px] font-black text-blue-600 bg-blue-50 dark:bg-blue-900/30 px-2 py-0.5 rounded leading-none">--</span>
                    <span id="coach-reps" class="text-[10px] font-bold text-slate-400 leading-none">--</span>
                    <span id="coach-set" class="text-[10px] font-black text-emerald-500 uppercase leading-none">--</span>
                </div>
            </div>
            <div id="coach-controls" class="flex gap-2"></div>
        </div>
    </footer>

    <script>
        // --- DATA ---
        const WORKOUTS = {
            A: [
                { name: "Seated Machine Shoulder Press", type: "shoulder", reps: "5–7", setsTarget: 3, setsMax: 3, load: "45 kg", rest: 120, q: "seated+machine+shoulder+press+form", mech: "stack", bar: 0, cues: ["Drive elbows high.", "Stay vertical."], avoid: ["Lower back arch."] },
                { name: "Smith Flat Press", type: "push", reps: "6–8", setsTarget: 4, setsMax: 4, load: "48 kg", rest: 120, q: "smith+machine+bench+press+form", hot: true, mech: "plates", bar: 8, cues: ["Unrack safely.", "Expand chest."], avoid: ["Flare elbows."] },
                { name: "Seated Cable Row (neutral, 2s pause)", type: "pull", reps: "6–8", setsTarget: 4, setsMax: 4, load: "55 kg", rest: 120, q: "seated+cable+row+neutral+grip+form", mech: "stack", cues: ["2s peak squeeze.", "Deep stretch."], avoid: ["Torso swing."] },
                { name: "Cable Serratus Punch", type: "shoulder", reps: "12–15", setsTarget: 2, setsMax: 2, load: "7.5 kg", rest: 45, q: "cable+serratus+punch+form", mech: "stack", cues: ["Arm straight.", "Push blade forward."], avoid: ["Elbow bend."] },
                { name: "Lateral Delt Machine", type: "shoulder", reps: "12–15", setsTarget: 3, setsMax: 3, load: "17.5 kg", rest: 90, q: "lateral+delt+machine+form", mech: "stack", cues: ["Lead elbows.", "Pause at top."], avoid: ["Shrug dominance."] },
                { name: "Overhead Cable Triceps Extension", type: "arms", reps: "8–10", setsTarget: 3, setsMax: 3, load: "12.5 kg", rest: 90, q: "overhead+cable+triceps+extension+form", mech: "stack", cues: ["Long head stretch.", "Stable elbow."], avoid: ["Lockout flare."] },
                { name: "Incline Dumbbell Curl", type: "arms", reps: "8–10", setsTarget: 3, setsMax: 3, load: "12 kg", rest: 75, q: "incline+dumbbell+curls+form", mech: "db", cues: ["Full stretch.", "No swing."], avoid: ["Shoulder roll."] }
            ],
            X: [
                { name: "Supine full-body reach", type: "core", reps: "30 s", setsTarget: 2, setsMax: 2, load: "0 kg", rest: 30, q: "supine+full+body+reach+stretch", cues: ["Arms overhead", "Heels long", "Actively lengthen"], avoid: ["Aggressive strain"] },
                { name: "Child’s pose long reach", type: "core", reps: "45–60 s", setsTarget: 2, setsMax: 2, load: "0 kg", rest: 30, q: "child+pose+reach+back+breath", cues: ["Hips back", "Ribs down", "Breathe into back"], avoid: ["Aggressive stretching"] },
                { name: "90/90 floor traction", type: "core", reps: "30–45 s", setsTarget: 2, setsMax: 2, load: "0 kg", rest: 30, q: "90+90+floor+traction+recovery", cues: ["Knees to chest", "Spine relaxed"], avoid: ["Forcing knees"] },
                { name: "Slow nasal breathing", type: "core", reps: "2 min", setsTarget: 1, setsMax: 1, load: "0 kg", rest: 60, q: "nasal+breathing+downregulation", cues: ["In through nose", "Long slow exhale"], avoid: ["Mouth breathing"] },
                { name: "Dead bug", type: "core", reps: "6–10 slow", setsTarget: 3, setsMax: 3, load: "0 kg", rest: 60, q: "dead+bug+proper+form", cues: ["Lower back glued to floor", "Stop before shaking"], avoid: ["Lower back arch"] },
                { name: "Hollow body hold", type: "core", reps: "20–40 s", setsTarget: 3, setsMax: 3, load: "0 kg", rest: 60, q: "hollow+body+hold+form", cues: ["Low ribs down", "End set early"], avoid: ["Lumbar arching"] },
                { name: "Side plank", type: "core", reps: "20–45 s", setsTarget: 3, setsMax: 3, load: "0 kg", rest: 60, q: "side+plank+form", cues: ["Hips stacked", "Neck neutral"], avoid: ["Hips dropping"] }
            ],
            B: [
                { name: "Neutral-Grip Lat Pulldown", type: "pull", reps: "4–6", setsTarget: 4, setsMax: 4, load: "50 kg", rest: 120, q: "neutral+grip+lat+pulldown+form", mech: "stack", bar: 0, cues: ["Elbows to pockets.", "Vertical pull."], avoid: ["Biceps dominance."] },
                { name: "High-Incline Machine Press", type: "push", reps: "3–6", setsTarget: 3, setsMax: 3, load: "45 kg", rest: 120, q: "high+incline+machine+press+form", mech: "plates", bar: 8, cues: ["Upper pec focus.", "Stable feet."], avoid: ["Excessive arch."] },
                { name: "Straight-Arm Cable Pulldown", type: "pull", reps: "10–12", setsTarget: 2, setsMax: 2, load: "25 kg", rest: 90, q: "straight+arm+lat+pulldown+form", mech: "stack", bar: 0, cues: ["Overhead arc.", "Wide lats focus."], avoid: ["Tricep push."] },
                { name: "Prone Y-Raise / Trap-3", type: "shoulder", reps: "12–15", setsTarget: 2, setsMax: 2, load: "1 kg", rest: 60, q: "prone+trap+3+raise+form", mech: "db", cues: ["Thumbs up.", "Neutral head."], avoid: ["Momentum."] },
                { name: "Chest-Supported Row (bilateral)", type: "pull", reps: "8–10", setsTarget: 3, setsMax: 3, load: "45 kg", rest: 90, q: "chest+supported+row+form", mech: "plates", bar: 8, cues: ["Heavy intent.", "Squeeze blades."], avoid: ["Torso lift."] },
                { name: "Cable Lateral Raise", type: "shoulder", reps: "12–15", setsTarget: 3, setsMax: 3, load: "7.5 kg", rest: 60, q: "cable+lateral+raise+form", mech: "stack", bar: 0, cues: ["Across body.", "Constant tension."], avoid: ["Shrug dominance."] },
                { name: "Rope Triceps Pushdown", type: "arms", reps: "10–12", setsTarget: 3, setsMax: 3, load: "25 kg", rest: 60, q: "rope+tricep+pushdowns+form", mech: "stack", bar: 0, cues: ["Flare ends.", "Lockout peak."], avoid: ["Rolling shoulders."] },
                { name: "EZ-Bar Curl", type: "arms", reps: "8–10", setsTarget: 3, setsMax: 3, load: "30 kg", rest: 75, q: "ez+bar+curls+form", mech: "plates", bar: 8, cues: ["Pinned elbows.", "Control down."], avoid: ["Torso swing."] }
            ],
            Y: [
                { name: "Wall slides", type: "shoulder", reps: "10", setsTarget: 2, setsMax: 2, load: "0 kg", rest: 45, q: "wall+slides+shoulder+health", cues: ["Back/head/hips on wall", "Ribs down", "Slide up without shrugging"], avoid: ["Lower back arch"] },
                { name: "Scapular push-ups", type: "pull", reps: "8–12", setsTarget: 2, setsMax: 2, load: "0 kg", rest: 45, q: "scapular+pushup+form", cues: ["Arms straight", "Move blades only", "No elbow bend"], avoid: ["Hip sag"] },
                { name: "Prone Y-hold", type: "shoulder", reps: "20–30 s", setsTarget: 2, setsMax: 2, load: "0 kg", rest: 60, q: "prone+y+hold+isometric", cues: ["Thumbs up", "Neck neutral", "Stop if upper traps burn"], avoid: ["Upper trap dominance"] },
                { name: "Shoulder CARs", type: "shoulder", reps: "3 slow per side", setsTarget: 2, setsMax: 2, load: "0 kg", rest: 30, q: "shoulder+cars+movement", cues: ["Controlled", "Pain-free", "No speed/momentum"], avoid: ["Spine twisting"] },
                { name: "Deep squat hold", type: "core", reps: "60–90 s", setsTarget: 2, setsMax: 2, load: "0 kg", rest: 60, q: "deep+squat+hold+mobility", cues: ["Heels down", "Spine long", "Elbows gently push knees out"], avoid: ["Heels lifting"] },
                { name: "Overhead reach + side bend", type: "core", reps: "20 s per side", setsTarget: 2, setsMax: 2, load: "0 kg", rest: 30, q: "standing+reach+side+bend", cues: ["Reach long", "Don’t crank", "Breathe through ribs"], avoid: ["Forced bending"] }
            ],
            C: [
                { name: "Machine Chest Press (4s eccentric)", type: "push", reps: "10–12", setsTarget: 3, setsMax: 3, load: "40 kg", rest: 90, q: "machine+chest+press+form", mech: "stack", bar: 0, cues: ["Slow control.", "Tension focus."], avoid: ["Bouncing."] },
                { name: "Supinated / Neutral Pulldown", type: "pull", reps: "10–12", setsTarget: 3, setsMax: 3, load: "40 kg", rest: 90, q: "underhand+lat+pulldown+form", mech: "stack", bar: 0, cues: ["Lat pump.", "Deep stretch."], avoid: ["Torso twist."] },
                { name: "SA Chest-Supported Cable Row", type: "pull", reps: "12–15", setsTarget: 3, setsMax: 3, load: "20 kg", rest: 45, q: "single+arm+cable+row+form", mech: "stack", bar: 0, cues: ["Arm by arm.", "Rotation control."], avoid: ["Leaning back."] },
                { name: "Cable External Rotation", type: "shoulder", reps: "15–20", setsTarget: 2, setsMax: 2, load: "5 kg", rest: 45, q: "cable+external+rotation+form", mech: "stack", bar: 0, cues: ["Elbow pinned.", "Rotator focus."], avoid: ["Momentum."] },
                { name: "Lateral Delt Machine", type: "shoulder", reps: "15–20", setsTarget: 2, setsMax: 2, load: "15 kg", rest: 60, q: "lateral+delt+machine+form", mech: "stack", bar: 0, cues: ["High rep pump."], avoid: ["Shrug."] },
                { name: "Reverse Pec Deck", type: "shoulder", reps: "15–20", setsTarget: 3, setsMax: 3, load: "12.5 kg", rest: 60, q: "reverse+pec+deck+form", mech: "stack", bar: 0, cues: ["Rear delt isolation."], avoid: ["Momentum."] },
                { name: "Rope Hammer Curl", type: "arms", reps: "12–15", setsTarget: 2, setsMax: 2, load: "20 kg", rest: 45, q: "rope+hammer+curls+form", mech: "stack", bar: 0, cues: ["Thumbs up."], avoid: ["Shoulder roll."] },
                { name: "SA Overhead Cable Triceps", type: "arms", reps: "12–15", setsTarget: 2, setsMax: 2, load: "12.5 kg", rest: 45, q: "single+arm+overhead+cable+triceps+extension+form", mech: "sta
